output: output/${timestamp}_validation
data_root: data  # update this path

aperture_shear_data:
  strategy: lrmodule.input_data.ScratchData
  input_file_path: ${data_root}/aperture_shear.csv

firing_pin_impression_data:
  strategy: lrmodule.input_data.ScratchData
  input_file_path: ${data_root}/firing_pin_impression.csv

breech_face_impression_data:
  strategy: lrmodule.input_data.ScratchData
  input_file_path: ${data_root}/breech_face_impression.csv

aperture_shear_ccf_lrsystem:
  architecture: lrmodule.binary_lrsystem
  modules:
    steps:
      transform:
        method: lrmodule.helpers.transform_marktype_ccf
      bootstrap:
        method: bootstrap
        n_bootstraps: 2
        seed: 0
        points: equidistant
        n_points: 100
        steps:
          kde:
            method: kde
            bandwidth:
              - 0.05  # KNM kernel size
              - 0.23  # KM kernel size
          elub: elub_bounder

firing_pin_impression_accf_lrsystem:
  architecture: lrmodule.binary_lrsystem
  modules:
    steps:
      select:
        method: lrmodule.helpers.select_marktype_accf
      transform:
        method: lrmodule.helpers.transform_marktype_accf
      bootstrap:
        method: bootstrap
        n_bootstraps: 8
        seed: 0
        points: data
        steps:
          kde:
            method: kde
            bandwidth:
              - 0.021  # KNM kernel size
              - 0.14  # KM kernel size
          elub: elub_bounder

breech_face_impression_accf_lrsystem:
  architecture: lrmodule.binary_lrsystem
  modules:
    steps:
      select:
        method: lrmodule.helpers.select_marktype_accf
      transform:
        method: lrmodule.helpers.transform_marktype_accf
      bootstrap:
        method: bootstrap
        n_bootstraps: 8
        seed: 0
        points: data
        steps:
          kde:
            method: kde
            bandwidth:
              - 0.027  # KNM kernel size
              - 0.11  # KM kernel size
          elub: elub_bounder

firing_pin_impression_cmc_lrsystem:
  architecture: lrmodule.binary_lrsystem
  modules:
    steps:
      select:
        method: lrmodule.helpers.select_marktype_cmc
      mcmc:
        method: lrmodule.mcmc.McmcLLRModel
        # parameters copied from MCMC test
        distribution_h1: betabinomial
        parameters_h1:
            alpha:
              prior: uniform
              lower: 0.01
              upper: 100
            beta:
              prior: uniform
              lower: 0.01
              upper: 100
        distribution_h2: binomial
        parameters_h2:
          p:
            prior: beta
            alpha: 0.5
            beta: 0.5
        interval:
          - 0.05
          - 0.95
      elub: elub_bounder  # does this work with the interval? (TODO: ticket)


breech_face_impression_cmc_lrsystem:
  architecture: lrmodule.binary_lrsystem
  modules:
    steps:
      select:
        method: lrmodule.helpers.select_marktype_cmc
      mcmc:
        method: lrmodule.mcmc.McmcLLRModel
        # parameters copied from MCMC test
        distribution_h1: betabinomial
        parameters_h1:
            alpha:
              prior: uniform
              lower: 0.01
              upper: 100
            beta:
              prior: uniform
              lower: 0.01
              upper: 100
        distribution_h2: binomial
        parameters_h2:
          p:
            prior: beta
            alpha: 0.5
            beta: 0.5
        interval:
          - 0.05
          - 0.95
      # elub: elub_bounder  # does this work with the interval? (TODO: ticket)

experiments:
  aperture_shear_model:
    strategy: single_run
    lr_system: ${aperture_shear_ccf_lrsystem}
    data: ${aperture_shear_data}
    metrics:
      - cllr
      - cllr_min
    visualization:
      - pav
      - ece
      - llr_interval
      # - score_histogram (ongetransformeerd)
      # - score_histogram (normalized (area=1))
      
  firing_pin_impression_model:
    strategy: single_run
    lr_system: ${firing_pin_impression_accf_lrsystem}
    data: ${firing_pin_impression_data}
    metrics:
      - cllr
      - cllr_min
    visualization:
      - pav
      - ece
      - llr_interval

  breech_face_impression_model_accf:
    strategy: single_run
    lr_system: ${breech_face_impression_accf_lrsystem}
    data: ${breech_face_impression_data}
    metrics:
      - cllr
      - cllr_min
    visualization:
      - pav
      - ece
      - llr_interval

  breech_face_impression_model_cmc:
    strategy: single_run
    lr_system: ${breech_face_impression_cmc_lrsystem}
    data: ${breech_face_impression_data}
    metrics:
      - cllr
      - cllr_min  
    visualization:
      - pav
      - ece
      - llr_interval

